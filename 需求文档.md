# 自动会议纪要Web应用 - 产品需求文档

## 1. 产品概述

### 1.1 产品定位
一个面向企业用户的浏览器端自动会议纪要生成应用，支持线上会议和线下面对面会议的语音录制、语音转文字、文字转纪要的全流程自动化。

### 1.2 目标用户
- 企业用户
- 需要记录会议内容的人员
- 需要快速生成会议纪要的团队

### 1.3 核心价值
- 自动化会议记录，提高工作效率
- 支持线上和线下会议场景
- 本地化存储，保护数据隐私

---

## 2. 功能需求

### 2.1 核心功能

#### 2.1.1 录音功能
**功能描述**：支持会议语音录制，提供开始、暂停、停止控制。

**详细需求**：
- 支持开始录音
- 支持暂停录音
- 支持停止录音
- 停止后自动开始生成会议纪要
- 实时显示录音时长（格式：HH:MM:SS）
- 录音源：自动获取系统音频和麦克风
- 录音格式：WebM（浏览器原生支持）

**技术实现**：
- 使用 MediaRecorder API
- 使用 navigator.mediaDevices.getUserMedia 获取音频流
- 同时获取系统音频和麦克风

#### 2.1.2 语音转文字
**功能描述**：将录制的会议语音转换成文字。

**详细需求**：
- 录音结束后统一调用API进行转写（一期不支持实时转写）
- 支持区分不同的说话人（由API实现）
- 转写完成后显示在"实时字幕"区域
- 支持一键复制转写全文

**技术实现**：
- 使用兼容OpenAI格式的语音识别API
- API配置：API Key、API地址
- 将WebM音频文件发送到API
- 接收并显示转写结果

#### 2.1.3 纪要生成
**功能描述**：分析转写文字，生成结构化的会议纪要。

**详细需求**：
- 语音转文字完成后自动触发纪要生成
- 显示"生成中"提示
- 生成完成后显示纪要内容
- 支持一键复制纪要
- 一期不支持重新生成
- 一期不支持人工编辑（用户复制出去自行编辑）

**技术实现**：
- 使用兼容OpenAI格式的纪要生成API
- API配置：API Key、API地址
- 使用Markdown模板配置纪要格式
- 一期只支持一种纪要模板
- 将转写文本发送到API
- 接收并显示纪要结果

#### 2.1.4 历史记录管理
**功能描述**：保存和管理历史会议记录。

**详细需求**：
- 显示会议列表
- 每条记录显示：日期、时长
- 点击查看详情
- 详情页面显示：录音文件、转写文本、纪要
- 支持删除记录
- 一期不支持搜索功能

**技术实现**：
- 使用IndexedDB进行本地存储
- 存储内容：日期、时长、录音文件、转写文本、纪要
- 一期不考虑存储空间管理

### 2.2 配置功能

#### 2.2.1 API配置
**功能描述**：配置语音识别和纪要生成的API。

**详细需求**：
- 支持配置语音识别API
  - API Key
  - API地址（支持自定义OpenAI兼容地址）
  - 模型名称（如：whisper-1、whisper-large-v3等）
- 支持配置纪要生成API
  - API Key
  - API地址（支持自定义OpenAI兼容地址）
  - 模型名称（如：gpt-3.5-turbo、gpt-4等）
- 支持测试API连接功能
- API调用失败时显示错误提示

#### 2.2.2 纪要模板配置
**功能描述**：配置会议纪要的生成模板。

**详细需求**：
- 在设置页面配置
- 使用Markdown格式
- 一期只支持一种模板格式
- 模板可自定义编辑

---

## 3. 界面设计

### 3.1 主界面

```
┌─────────────────────────────────────────────┐
│  自动会议纪要              [设置] [历史]      │
├─────────────────────────────────────────────┤
│                                             │
│         [开始录音]                           │
│                                             │
│  录音时长: 00:00:00                         │
│                                             │
├─────────────────────────────────────────────┤
│  实时字幕                                    │
│  ┌───────────────────────────────────────┐ │
│  │ [字幕内容显示区域]                     │ │
│  │                                       │ │
│  │                                       │ │
│  └───────────────────────────────────────┘ │
│  [复制全文]                                 │
├─────────────────────────────────────────────┤
│  会议纪要                                    │
│  ┌───────────────────────────────────────┐ │
│  │ [纪要内容显示区域]                     │ │
│  │                                       │ │
│  │                                       │ │
│  └───────────────────────────────────────┘ │
│  [复制纪要]                                 │
└─────────────────────────────────────────────┘
```

### 3.2 历史记录界面

```
┌─────────────────────────────────────────────┐
│  历史记录                      [返回]       │
├─────────────────────────────────────────────┤
│  ┌───────────────────────────────────────┐ │
│  │ 2024-01-15  00:15:30  [查看] [删除]  │ │
│  ├───────────────────────────────────────┤ │
│  │ 2024-01-14  00:45:20  [查看] [删除]  │ │
│  ├───────────────────────────────────────┤ │
│  │ 2024-01-13  00:30:15  [查看] [删除]  │ │
│  └───────────────────────────────────────┘ │
└─────────────────────────────────────────────┘
```

### 3.3 会议详情界面

```
┌─────────────────────────────────────────────┐
│  会议详情                      [返回]       │
├─────────────────────────────────────────────┤
│  日期: 2024-01-15                           │
│  时长: 00:15:30                             │
├─────────────────────────────────────────────┤
│  录音文件                                    │
│  [播放] [下载]                              │
├─────────────────────────────────────────────┤
│  转写文本                                    │
│  ┌───────────────────────────────────────┐ │
│  │ [转写文本内容]                         │ │
│  └───────────────────────────────────────┘ │
│  [复制全文]                                 │
├─────────────────────────────────────────────┤
│  会议纪要                                    │
│  ┌───────────────────────────────────────┐ │
│  │ [纪要内容]                             │ │
│  └───────────────────────────────────────┘ │
│  [复制纪要]                                 │
└─────────────────────────────────────────────┘
```

### 3.4 设置界面

```
┌─────────────────────────────────────────────┐
│  设置                          [返回]       │
├─────────────────────────────────────────────┤
│  语音识别API配置                             │
│  ┌───────────────────────────────────────┐ │
│  │ API地址: [_______________]            │ │
│  │ API Key: [_______________]            │ │
│  │ 模型名称: [_______________]          │ │
│  │ [测试连接]                             │ │
│  └───────────────────────────────────────┘ │
├─────────────────────────────────────────────┤
│  纪要生成API配置                             │
│  ┌───────────────────────────────────────┐ │
│  │ API地址: [_______________]            │ │
│  │ API Key: [_______________]            │ │
│  │ 模型名称: [_______________]          │ │
│  │ [测试连接]                             │ │
│  └───────────────────────────────────────┘ │
├─────────────────────────────────────────────┤
│  纪要模板配置                                │
│  ┌───────────────────────────────────────┐ │
│  │ [Markdown模板编辑器]                  │ │
│  │                                       │ │
│  │                                       │ │
│  └───────────────────────────────────────┘ │
│  [保存]                                    │
└─────────────────────────────────────────────┘
```

---

## 4. 技术方案

### 4.1 技术栈
- **前端框架**：纯原生 HTML + CSS + JavaScript
- **数据存储**：IndexedDB（浏览器本地存储）
- **录音格式**：WebM（浏览器原生支持）
- **浏览器支持**：Chrome、Firefox、Edge

### 4.2 核心技术点

#### 4.2.1 录音功能
- 使用 MediaRecorder API
- 使用 navigator.mediaDevices.getUserMedia 获取音频流
- 同时获取系统音频和麦克风

#### 4.2.2 数据存储
- 使用 IndexedDB 存储会议记录
- 存储结构：
  ```javascript
  {
    id: timestamp,
    date: "2024-01-15",
    duration: "00:15:30",
    audioFile: Blob,
    transcript: "转写文本",
    summary: "纪要内容"
  }
  ```

#### 4.2.3 API调用
- 语音识别API：兼容OpenAI格式的自定义API
- 纪要生成API：兼容OpenAI格式的自定义API
- 使用 fetch API 发送请求

#### 4.2.4 实时字幕
- 录音结束后统一调用API
- 显示转写结果
- 支持复制功能

---

## 5. 数据流程

### 5.1 录音流程
```
用户点击"开始录音" → 获取音频流 → 开始录制 → 显示时长
用户点击"暂停录音" → 暂停录制 → 暂停计时
用户点击"继续录音" → 继续录制 → 继续计时
用户点击"停止录音" → 停止录制 → 保存录音文件 → 开始转写
```

### 5.2 转写流程
```
停止录音 → 显示"转写中" → 调用语音识别API → 接收转写结果 → 显示字幕 → 开始生成纪要
```

### 5.3 纪要生成流程
```
转写完成 → 显示"生成中" → 调用纪要生成API → 接收纪要结果 → 显示纪要 → 保存到历史记录
```

### 5.4 数据存储流程
```
纪要生成完成 → 保存到IndexedDB → 更新历史记录列表
```

---

## 6. 非功能需求

### 6.1 性能要求
- 录音过程流畅，无明显卡顿
- API调用响应时间合理（< 30秒）
- 历史记录加载快速

### 6.2 兼容性要求
- 支持Chrome、Firefox、Edge浏览器
- 支持Windows、Linux、macOS操作系统

### 6.3 安全性要求
- API Key本地存储，不上传到服务器
- 录音文件和转写文本本地存储
- 不需要额外的数据隐私处理（根据API情况）

### 6.4 易用性要求
- 界面简洁明了
- 操作流程简单直观
- 提供清晰的错误提示

---

## 7. 一期功能范围

### 7.1 包含功能
- ✅ 录音控制（开始/暂停/停止）
- ✅ 语音转文字（录音结束后统一调用）
- ✅ 文字转纪要（自动触发）
- ✅ 字幕显示（录音结束后显示）
- ✅ 历史记录列表（查看、删除）
- ✅ API配置管理（语音识别、纪要生成）
- ✅ 模型配置（语音识别模型、纪要生成模型）
- ✅ 纪要模板配置（一种格式）
- ✅ API连接测试
- ✅ 一键复制功能

### 7.2 不包含功能
- ❌ 实时字幕（边录音边转写）
- ❌ 说话人识别（由API实现，不单独开发）
- ❌ 多种纪要模板
- ❌ 纪要重新生成
- ❌ 纪要人工编辑
- ❌ 会议信息录入（会议名称、主题等）
- ❌ 历史记录搜索
- ❌ 存储空间管理
- ❌ 多人协作
- ❌ 会议纪要导出（PDF、Word等）
- ❌ 标记重要时刻

---

## 8. 后续迭代方向

### 8.1 二期功能
- 实时字幕（边录音边转写）
- 多种纪要模板支持
- 纪要重新生成功能
- 纪要人工编辑功能
- 会议信息录入（会议名称、主题、参会人员）
- 历史记录搜索功能

### 8.2 三期功能
- 存储空间管理
- 会议纪要导出（PDF、Word、Markdown）
- 标记重要时刻
- 多人协作功能
- 会议统计和分析

---

## 9. 风险和限制

### 9.1 技术风险
- 浏览器兼容性问题（不同浏览器对MediaRecorder的支持程度不同）
- API调用失败或超时
- IndexedDB存储空间限制

### 9.2 使用限制
- 需要用户配置有效的API Key
- 需要网络连接（调用API）
- 录音质量受设备和环境影响

### 9.3 数据隐私
- 录音文件和转写文本会上传到API服务器
- API服务的数据处理方式由API提供商决定

---

## 10. 验收标准

### 10.1 功能验收
- 能够正常开始、暂停、停止录音
- 能够正确显示录音时长
- 能够成功调用语音识别API并显示转写结果
- 能够成功调用纪要生成API并显示纪要
- 能够正确保存和查看历史记录
- 能够正确配置和测试API
- 能够正确配置模型名称

### 10.2 界面验收
- 界面布局合理，符合设计稿
- 操作流程清晰，易于理解
- 错误提示明确，便于排查问题

### 10.3 兼容性验收
- 在Chrome、Firefox、Edge浏览器上正常运行
- 在Windows、Linux、macOS操作系统上正常运行

---

## 11. 项目结构

```
自动会议纪要web应用/
├── index.html          # 主页面
├── css/
│   └── style.css      # 样式文件
├── js/
│   ├── app.js         # 主应用逻辑
│   ├── recorder.js    # 录音功能
│   ├── storage.js     # 数据存储
│   ├── api.js         # API调用
│   └── ui.js          # UI交互
├── README.md          # 项目说明
└── 需求文档.md        # 本文档
```

---

## 12. 开发计划

### 12.1 第一阶段：基础框架搭建
- 创建项目结构
- 实现基础UI界面
- 实现页面切换功能

### 12.2 第二阶段：核心功能实现
- 实现录音功能
- 实现数据存储功能
- 实现API配置功能

### 12.3 第三阶段：业务逻辑实现
- 实现语音转文字功能
- 实现纪要生成功能
- 实现历史记录管理

### 12.4 第四阶段：测试和优化
- 功能测试
- 兼容性测试
- 性能优化
- Bug修复

---

## 13. 版本历史

| 版本 | 日期 | 说明 |
|------|------|------|
| v1.0 | 2024-01-30 | 初始版本，一期功能需求 |

---

## 14. 附录

### 14.1 API接口说明

#### 14.1.1 语音识别API
- 请求方式：POST
- 请求格式：multipart/form-data
- 请求参数：
  - file: 音频文件（WebM格式）
  - model: 模型名称（可选）
- 响应格式：JSON
- 响应示例：
  ```json
  {
    "text": "转写文本内容"
  }
  ```

#### 14.1.2 纪要生成API
- 请求方式：POST
- 请求格式：application/json
- 请求参数：
  - model: 模型名称
  - messages: 消息列表
  - temperature: 温度参数（可选）
- 响应格式：JSON
- 响应示例：
  ```json
  {
    "choices": [
      {
        "message": {
          "content": "纪要内容"
        }
      }
    ]
  }
  ```

### 14.2 默认纪要模板

```markdown
# 会议纪要

## 会议概述
[会议概述内容]

## 主要议题
[主要议题内容]

## 讨论要点
[讨论要点内容]

## 决策事项
[决策事项内容]

## 待办事项
[待办事项内容]

## 其他事项
[其他事项内容]
```
